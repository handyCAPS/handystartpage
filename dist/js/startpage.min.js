/*! handystartpage - v0.0.1 - 2014-03-14
* Copyright (c) 2014 Tim Doppenberg; Licensed  */
function timingOut(a){var b=new jQuery.Deferred;return setTimeout(function(){b.resolve()},a),b.promise()}function placeRangeWrap(){$(".range_wrap").css({top:$("#bestof").outerHeight(),right:0})}function showRangeSelector(){placeRangeWrap(),$.when(timingOut(5e3)).done(function(){var a=$("#bestOfRange"),b=$(".range_display"),c=$(".range_wrap");a.show("slow"),b.html(a.val()),b.animate({opacity:1}),a.on("input",function(){b.html($(this).val())}),a.on("mouseup",function(){$("#bestOfWrap").load("scripts/update-bestof.php",{bestOfRange:a.val()}),$.when(timingOut(1e3)).done(function(){c.addClass("tiny"),c.css({top:"-8px",right:"-80px"})})}),a.on("mouseover",function(){$(".tiny").removeClass("tiny"),placeRangeWrap()})})}function checkCookie(a){var b=new RegExp(a),c=document.cookie,d=c.match(b);return d?d.index:d}function getCookieValue(a){var b=checkCookie(a);return-1!==b?document.cookie.substr(b+a.length):!1}function hoverButtonsOnload(){$.when(timingOut(800)).done(function(){var a="howManyLoads=",b=getCookieValue(a)||0;if(b++,document.cookie=a+b+";max-age=60",b>5)return this.done();if(""!==window.location.search)return this.done();var c=$(".show-add-form"),d=0,e=c.length,f=$(c).offset().left,g=[];for(c.addClass("hovered");e>d;d++){var h,i=c[d].title,j="#"+c[d].id,k="#af"+c[d].id;$("body").append('<div class="add-form-title" id="'+k.replace("#","")+'">'+i+"</div>");var l=$(j).offset().left;l>f?(f=l,h=l-($(k).innerWidth()+16)):h=l+40,$(k).animate({top:$(j).offset().top-16,left:h,opacity:1}),g.push(k)}$.when(timingOut(1200)).done(function(){return c.removeClass("hovered"),this.done()}).done(function(){for(var a=0;a<g.length;a++)$(g[a]).fadeOut(2800)})})}$(document).ready(function(){hoverButtonsOnload(),showRangeSelector(),$(window).on("resize",function(){placeRangeWrap()})}),$(document).ready(function(){function a(){var a=$(this).parents("section"),b=a[0].id,c="#show"+b[0].toUpperCase()+b.substr(1);a.fadeOut("fast"),$(c).fadeIn("slow")}function b(){$("#addLinkForm").fadeIn("slow"),$("#showAddLinkForm").fadeOut("fast"),$("#addLinkForm form input:first-of-type").focus()}function c(){$("#addCatForm").fadeIn("slow"),$("#showAddCatForm").fadeOut("fast"),$("#addCatForm form input:first-of-type").focus()}function d(){$(".show-add-form").css({top:$("#bestof").innerHeight()+1.5*$(".show-add-form").outerHeight()})}var e=$("#innerWrap");e.masonry({itemSelector:".sub-sections"}),$("a").on("click",function(a){var b=a.currentTarget.id.replace(/[^0-9]*/,"");$.post("scripts/update-clicks.php?id="+b,function(){window.location.reload()})}),d(),$(window).on("resize",d),$(".desc").on("focusin",function(a){$(this).animate({height:"+=119px",width:"+=40px"}),"No Description Available"===$(this).html()?$(this).select():a.currentTarget.selectionStart=$(this).html().length}),$(".desc").on("focusout",function(){$(this).animate({height:"-=119px",width:"-=40px"})}),$("#showAddLinkForm").on("click",b),$("#showAddCatForm").on("click",c),$(".closexWrap").on("click",a),$("body").on("keypress",function(a){113===a.charCode&&a.altKey===!0?b():99===a.charCode&&a.altKey===!0&&c()}),$(".delete-button").on("click",function(){confirm("Sure ?")&&$.post("scripts/delete-link.php?id="+$(this).siblings('[name="id"]')[0].value,function(){window.location.reload()})}),$(".clear-clicks").on("click",function(a){confirm("Are you sure you want to reset all the clicks to 0 ?")||a.preventDefault()}),$('input[name="image"]').on("mouseover focusout",function(a){function b(c,d){"undefined"==typeof window.$(".preview-image")[0]?"mouseover"===a.type?($("body").append(c),$(d).css({top:a.pageY-60,left:a.pageX+24})):"focusout"===a.type&&($("body").append(c),$(d).css({top:196,right:34})):($(".preview-image").remove(),b(c,e))}var c="prev"+$(this).parent().context.id,d="<div class='preview-image' id='"+c+"'><img src='dist/images/"+$(this)[0].value+"' alt=''></div>",e="#"+c;b(d,e)}),$('input[name="image"]').on("mouseout focusin",function(){var a="#prev"+$(this).parent().context.id;$(a).remove()})});